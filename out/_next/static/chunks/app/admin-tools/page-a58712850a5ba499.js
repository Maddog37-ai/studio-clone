(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1064],{6101:(e,r,t)=>{"use strict";t.d(r,{s:()=>l,t:()=>n});var a=t(12115);function s(e,r){if("function"==typeof e)return e(r);null!=e&&(e.current=r)}function n(...e){return r=>{let t=!1,a=e.map(e=>{let a=s(e,r);return t||"function"!=typeof a||(t=!0),a});if(t)return()=>{for(let r=0;r<a.length;r++){let t=a[r];"function"==typeof t?t():s(e[r],null)}}}}function l(...e){return a.useCallback(n(...e),e)}},30285:(e,r,t)=>{"use strict";t.d(r,{$:()=>d,r:()=>i});var a=t(95155),s=t(12115),n=t(99708),l=t(74466),o=t(59434);let i=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"text-primary-foreground bg-gradient-to-r from-[hsl(var(--primary-gradient-from))] to-[hsl(var(--primary-gradient-to))] hover:from-[hsl(var(--primary-gradient-to))] hover:to-[hsl(var(--primary-gradient-from))] shadow-md hover:shadow-lg",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-md hover:shadow-lg",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground shadow-sm hover:shadow-md",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-sm hover:shadow-md",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline","primary-solid":"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md hover:shadow-lg"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,r)=>{let{className:t,variant:s,size:l,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,a.jsx)(u,{className:(0,o.cn)(i({variant:s,size:l,className:t})),ref:r,...c})});d.displayName="Button"},35695:(e,r,t)=>{"use strict";var a=t(18999);t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})},56104:(e,r,t)=>{"use strict";t.d(r,{EF:()=>m,IG:()=>u,KW:()=>g,PW:()=>x,V$:()=>f,db:()=>c,j2:()=>d,yA:()=>i,zV:()=>p});var a=t(23915),s=t(93004),n=t(35317),l=t(90858),o=t(81427);let i=(0,a.Dk)().length?(0,a.Sx)():(0,a.Wp)({apiKey:"AIzaSyBc3jmFE6dRXBApmWD9Jg2PO86suqGgaZw",authDomain:"leadflow-4lvrr.firebaseapp.com",projectId:"leadflow-4lvrr",storageBucket:"leadflow-4lvrr.firebasestorage.app",messagingSenderId:"13877630896",appId:"1:13877630896:web:ab7d2717024960ec36e875",measurementId:"G-KDEF2C21SH"}),d=(0,s.xI)(i),c=(0,n.aU)(i),u=(0,l.c7)(i),h=(0,o.Uz)(i),m=(0,o.Qg)(h,"acceptJob");(0,o.Qg)(h,"leadflowBot");let f=(0,o.Qg)(h,"inviteUser"),g=(0,o.Qg)(h,"updateAdminRoles"),p=(0,o.Qg)(h,"getTeamStats");(0,o.Qg)(h,"getDetailedAnalytics"),(0,o.Qg)(h,"generateAnalyticsReport");let x=async e=>await m({leadId:e})},59434:(e,r,t)=>{"use strict";t.d(r,{cn:()=>n});var a=t(52596),s=t(39688);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.$)(r))}},64394:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var a=t(95155),s=t(12115),n=t(30285),l=t(66695),o=t(98030);function i(){let{user:e}=(0,o.A)(),[r,i]=(0,s.useState)(!1),[d,c]=(0,s.useState)(""),[u,h]=(0,s.useState)(!1),m=e&&("manager"===e.role||"admin"===e.role);(0,s.useEffect)(()=>{let e=async()=>{try{let{db:e}=await Promise.resolve().then(t.bind(t,56104));e&&h(!0)}catch(e){console.error("Firebase not ready:",e),c("❌ Firebase connection failed. Please refresh the page.")}};m&&e()},[m]);let f=async()=>{if(!m)return void c("❌ Access denied. Admin/Manager role required.");i(!0),c("Starting Tony Tiger lead fix...");try{c("Loading Firebase...");let{db:a}=await Promise.resolve().then(t.bind(t,56104)),{collection:s,query:n,where:l,getDocs:o,doc:i,updateDoc:d,serverTimestamp:u}=await Promise.resolve().then(t.bind(t,35317));c("✅ Firebase loaded. Searching for Tony Tiger lead...");let h=n(s(a,"leads"),l("customerName","==","Tony Tiger")),m=await o(h);if(m.empty&&(c("No customer named Tony Tiger found. Searching assigned closers..."),h=n(s(a,"leads"),l("assignedCloserName","==","Tony Tiger")),m=await o(h)),m.empty){c("❌ No Tony Tiger lead found. Let me search all leads...");let e=n(s(a,"leads")),r=await o(e),t="Found ".concat(r.size," total leads:\n\n"),l=!1;r.forEach(e=>{let r=e.data(),a=r.customerName||"No Name",s=r.assignedCloserName||"Unassigned";(a.toLowerCase().includes("tony")||s.toLowerCase().includes("tony")||a.toLowerCase().includes("tiger")||s.toLowerCase().includes("tiger"))&&(t+="\uD83C\uDFAF MATCH: ".concat(e.id,"\n"),t+="   Customer: ".concat(a,"\n"),t+="   Assigned: ".concat(s,"\n"),t+="   Status: ".concat(r.status,"\n\n"),l=!0)}),l||(t+="\n❌ No leads found containing 'Tony' or 'Tiger'"),c(t);return}let f="Found ".concat(m.size," Tony Tiger lead(s):\n\n"),g=0;for(let t of m.docs){var e,r;let s=t.data();f+="\uD83D\uDCCB Lead ID: ".concat(t.id,"\n"),f+="\uD83D\uDC64 Customer: ".concat(s.customerName,"\n"),f+="\uD83C\uDFAF Assigned to: ".concat(s.assignedCloserName||"Unassigned","\n"),f+="\uD83D\uDCCA Status: ".concat(s.status,"\n"),f+="\uD83D\uDD52 Created: ".concat((null==(r=s.createdAt)||null==(e=r.toDate)?void 0:e.call(r))||"Unknown","\n"),f+="---\n","scheduled"===s.status?(f+="\uD83D\uDD04 Updating ".concat(t.id,' from "scheduled" to "rescheduled"...\n'),await d(i(a,"leads",t.id),{status:"rescheduled",updatedAt:u(),statusChangeReason:"Fixed icon color - lead was reassigned so should show rescheduled"}),f+="✅ Updated successfully!\n",g++):"rescheduled"===s.status?f+='✅ Already marked as "rescheduled"\n':f+='ℹ️ Status is "'.concat(s.status,'" - no update needed\n'),f+="\n"}g>0?(f+="\n\uD83C\uDF89 SUCCESS! Updated ".concat(g,' lead(s) to "rescheduled".\n'),f+="\uD83C\uDFA8 Tony Tiger's lead will now show a PURPLE rescheduled icon.\n",f+="\uD83D\uDD04 Refresh the dashboard to see changes."):f+="\n\uD83D\uDCDD No leads needed updating.",c(f)}catch(t){let e=t instanceof Error?t.message:"Unknown error",r=t instanceof Error?t:String(t);c("❌ Error: ".concat(e,"\n\nFull error: ").concat(JSON.stringify(r,null,2)))}finally{i(!1)}};return e?m?(0,a.jsx)("div",{className:"container mx-auto p-6",children:(0,a.jsxs)(l.Zp,{className:"max-w-4xl mx-auto",children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{children:"Tony Tiger Lead Status Fix"})}),(0,a.jsxs)(l.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsx)("p",{children:(0,a.jsx)("strong",{children:"What this tool does:"})}),(0,a.jsxs)("ul",{className:"list-disc ml-5 mt-2 space-y-1",children:[(0,a.jsx)("li",{children:"Finds Tony Tiger's lead in the database"}),(0,a.jsx)("li",{children:'Changes status from "scheduled" to "rescheduled"'}),(0,a.jsxs)("li",{children:["This makes the lead show a ",(0,a.jsx)("span",{className:"text-purple-600 font-semibold",children:"PURPLE"})," rescheduled icon instead of blue"]}),(0,a.jsx)("li",{children:"Only works for Manager/Admin users"})]})]}),!u&&m&&(0,a.jsx)("div",{className:"text-amber-600 text-sm",children:"⚠️ Firebase is still loading..."}),(0,a.jsx)(n.$,{onClick:f,disabled:r||!u,className:"w-full",children:r?"Working...":"Find and Fix Tony Tiger Lead"}),d&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg border",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Results:"}),(0,a.jsx)("pre",{className:"text-sm whitespace-pre-wrap font-mono overflow-x-auto",children:d})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 border-t pt-4",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Alternative method:"})," You can also run the browser console script:"]}),(0,a.jsxs)("ol",{className:"list-decimal ml-5 mt-1 space-y-1",children:[(0,a.jsx)("li",{children:"Go to the dashboard page"}),(0,a.jsx)("li",{children:"Open Developer Tools (F12) → Console tab"}),(0,a.jsxs)("li",{children:["Copy and paste the script from ",(0,a.jsx)("code",{children:"/scripts/browser-fix-tony-tiger.js"})]})]})]})]})]})}):(0,a.jsx)("div",{className:"container mx-auto p-6",children:(0,a.jsxs)(l.Zp,{className:"max-w-2xl mx-auto",children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{className:"text-red-600",children:"Access Denied"})}),(0,a.jsxs)(l.Wu,{children:[(0,a.jsx)("p",{children:"This tool requires Manager or Admin role."}),(0,a.jsxs)("p",{children:["Your current role: ",e.role]})]})]})}):(0,a.jsx)("div",{className:"container mx-auto p-6",children:(0,a.jsx)(l.Zp,{className:"max-w-2xl mx-auto",children:(0,a.jsx)(l.Wu,{className:"p-6",children:(0,a.jsx)("div",{className:"text-center",children:"Loading..."})})})})}},66695:(e,r,t)=>{"use strict";t.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>i,Zp:()=>l,aR:()=>o,wL:()=>u});var a=t(95155),s=t(12115),n=t(59434);let l=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("rounded-xl border border-slate-200 bg-white text-card-foreground","shadow-lg shadow-slate-200/50 hover:shadow-xl hover:shadow-slate-300/50","transition-all duration-200 ease-in-out","dark:bg-slate-800/95 dark:border-slate-700/50 dark:shadow-lg dark:shadow-slate-900/25","dark:hover:shadow-xl dark:hover:shadow-slate-900/40","dark:ring-1 dark:ring-slate-700/50",t),...s})});l.displayName="Card";let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...s})});o.displayName="CardHeader";let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("h3",{ref:r,className:(0,n.cn)("text-3xl font-bold font-headline leading-tight tracking-tight text-center",t),...s})});i.displayName="CardTitle";let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground text-center",t),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",t),...s})});c.displayName="CardContent";let u=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",t),...s})});u.displayName="CardFooter"},74466:(e,r,t)=>{"use strict";t.d(r,{F:()=>l});var a=t(52596);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=a.$,l=(e,r)=>t=>{var a;if((null==r?void 0:r.variants)==null)return n(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:l,defaultVariants:o}=r,i=Object.keys(l).map(e=>{let r=null==t?void 0:t[e],a=null==o?void 0:o[e];if(null===r)return null;let n=s(r)||s(a);return l[e][n]}),d=t&&Object.entries(t).reduce((e,r)=>{let[t,a]=r;return void 0===a||(e[t]=a),e},{});return n(e,i,null==r||null==(a=r.compoundVariants)?void 0:a.reduce((e,r)=>{let{class:t,className:a,...s}=r;return Object.entries(s).every(e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...o,...d}[r]):({...o,...d})[r]===t})?[...e,t,a]:e},[]),null==t?void 0:t.class,null==t?void 0:t.className)}},92726:(e,r,t)=>{Promise.resolve().then(t.bind(t,64394))},98030:(e,r,t)=>{"use strict";t.d(r,{A:()=>h,AuthProvider:()=>u});var a=t(95155),s=t(93004),n=t(35317),l=t(35695),o=t(12115),i=t(56104),d=t(50172);let c=(0,o.createContext)(void 0),u=e=>{let{children:r}=e,[t,u]=(0,o.useState)(null),[h,m]=(0,o.useState)(null),[f,g]=(0,o.useState)(!0),p=(0,l.useRouter)(),x=(0,l.usePathname)();(0,o.useEffect)(()=>{let e=(0,s.hg)(i.j2,async e=>{u(e),e||(m(null),g(!1))});return()=>e()},[]),(0,o.useEffect)(()=>{let e;if(t){g(!0);let r=(0,n.doc)(i.db,"users",t.uid);e=(0,n.aQ)(r,e=>{e.exists()?m({uid:t.uid,...e.data()}):m(null),g(!1)},()=>{m(null),g(!1)})}else m(null),g(!1);return()=>{e&&e()}},[t]),(0,o.useEffect)(()=>{f||h||"/login"===x||p.push("/login"),!f&&h&&"/login"===x&&p.push("/dashboard")},[h,f,p,x]);let v=async()=>{g(!0),await (0,s.CI)(i.j2),m(null),u(null),g(!1)};if(f&&"/login"!==x&&!h)return(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-background",children:(0,a.jsx)(d.A,{className:"h-12 w-12 animate-spin text-primary"})});let y={firebaseUser:t,user:h,loading:f,teamId:(null==h?void 0:h.teamId)||null,role:(null==h?void 0:h.role)||null,logout:v};return(0,a.jsx)(c.Provider,{value:y,children:r})},h=()=>{let e=(0,o.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},99708:(e,r,t)=>{"use strict";t.d(r,{DX:()=>o,Dc:()=>d,TL:()=>l});var a=t(12115),s=t(6101),n=t(95155);function l(e){let r=function(e){let r=a.forwardRef((e,r)=>{let{children:t,...n}=e;if(a.isValidElement(t)){var l;let e,o,i=(l=t,(o=(e=Object.getOwnPropertyDescriptor(l.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.ref:(o=(e=Object.getOwnPropertyDescriptor(l,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.props.ref:l.props.ref||l.ref),d=function(e,r){let t={...r};for(let a in r){let s=e[a],n=r[a];/^on[A-Z]/.test(a)?s&&n?t[a]=(...e)=>{let r=n(...e);return s(...e),r}:s&&(t[a]=s):"style"===a?t[a]={...s,...n}:"className"===a&&(t[a]=[s,n].filter(Boolean).join(" "))}return{...e,...t}}(n,t.props);return t.type!==a.Fragment&&(d.ref=r?(0,s.t)(r,i):i),a.cloneElement(t,d)}return a.Children.count(t)>1?a.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}(e),t=a.forwardRef((e,t)=>{let{children:s,...l}=e,o=a.Children.toArray(s),i=o.find(c);if(i){let e=i.props.children,s=o.map(r=>r!==i?r:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,n.jsx)(r,{...l,ref:t,children:a.isValidElement(e)?a.cloneElement(e,void 0,s):null})}return(0,n.jsx)(r,{...l,ref:t,children:s})});return t.displayName=`${e}.Slot`,t}var o=l("Slot"),i=Symbol("radix.slottable");function d(e){let r=({children:e})=>(0,n.jsx)(n.Fragment,{children:e});return r.displayName=`${e}.Slottable`,r.__radixId=i,r}function c(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===i}}},e=>{var r=r=>e(e.s=r);e.O(0,[2992,3644,5769,8248,8198,8441,1684,7358],()=>r(92726)),_N_E=e.O()}]);