(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6510],{26126:(e,r,s)=>{"use strict";s.d(r,{E:()=>d});var a=s(95155);s(12115);var t=s(74466),l=s(59434);let n=(0,t.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:r,variant:s,...t}=e;return(0,a.jsx)("div",{className:(0,l.cn)(n({variant:s}),r),...t})}},35695:(e,r,s)=>{"use strict";var a=s(18999);s.o(a,"usePathname")&&s.d(r,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(r,{useRouter:function(){return a.useRouter}})},46400:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>i});var a=s(95155),t=s(98030),l=s(66695),n=s(26126),d=s(12115);function i(){let{user:e,loading:r}=(0,t.A)(),[s,i]=(0,d.useState)(0);if((0,d.useEffect)(()=>{i(e=>e+1)},[e]),r)return(0,a.jsx)("div",{className:"container mx-auto py-8",children:(0,a.jsx)(l.Zp,{className:"max-w-md mx-auto",children:(0,a.jsx)(l.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),(0,a.jsx)("span",{className:"ml-2",children:"Loading user data..."})]})})})});let o=(null==e?void 0:e.role)==="manager"||(null==e?void 0:e.role)==="admin";return(0,a.jsx)("div",{className:"container mx-auto py-8",children:(0,a.jsxs)(l.Zp,{className:"max-w-2xl mx-auto",children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{children:"Role Testing & Manager Tools Visibility"})}),(0,a.jsxs)(l.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"User Authentication"}),(0,a.jsx)(n.E,{variant:e?"default":"destructive",children:e?"Authenticated":"Not Authenticated"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Render Count"}),(0,a.jsx)(n.E,{variant:"outline",children:s})]})]}),e&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Email:"})," ",e.email]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Display Name:"})," ",e.displayName||"None"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Role:"}),(0,a.jsx)(n.E,{className:"ml-2",variant:"admin"===e.role?"default":"secondary",children:e.role})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Team ID:"})," ",e.teamId||"None"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"UID:"})," ",e.uid]})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Manager Tools Visibility Test"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("strong",{children:"Should show manager tools:"}),(0,a.jsx)(n.E,{variant:o?"default":"destructive",children:o?"YES":"NO"})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Manager tools appear when: ",(0,a.jsx)("code",{children:'(user?.role === "manager" || user?.role === "admin")'})]}),(0,a.jsxs)("div",{className:"text-sm",children:["Current evaluation: ",(0,a.jsxs)("code",{children:[null==e?void 0:e.role,' === "manager"']})," = ",(null==e?void 0:e.role)==="manager"?"true":"false"]}),(0,a.jsxs)("div",{className:"text-sm",children:["Current evaluation: ",(0,a.jsxs)("code",{children:[null==e?void 0:e.role,' === "admin"']})," = ",(null==e?void 0:e.role)==="admin"?"true":"false"]}),(0,a.jsxs)("div",{className:"text-sm font-semibold",children:["Final result: ",o?"✅ Manager tools should be visible":"❌ Manager tools should be hidden"]})]})]}),(null==e?void 0:e.role)==="admin"&&(0,a.jsxs)("div",{className:"bg-green-50 dark:bg-green-950/20 p-4 rounded-lg border border-green-200 dark:border-green-800",children:[(0,a.jsx)("h4",{className:"font-semibold text-green-800 dark:text-green-200 mb-2",children:"✅ Admin Role Detected!"}),(0,a.jsx)("p",{className:"text-green-700 dark:text-green-300 text-sm",children:"You should see the following manager tools in the sidebar:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside text-green-700 dark:text-green-300 text-sm mt-1",children:[(0,a.jsx)("li",{children:"Lead Management"}),(0,a.jsx)("li",{children:"Performance Analytics"}),(0,a.jsx)("li",{children:"All Leads History"}),(0,a.jsx)("li",{children:"Admin Tools (admin only)"})]}),(0,a.jsx)("p",{className:"text-green-700 dark:text-green-300 text-sm mt-2",children:"If you don't see these, try refreshing the page or clearing your browser cache."})]}),e&&"admin"!==e.role&&"manager"!==e.role&&(0,a.jsxs)("div",{className:"bg-amber-50 dark:bg-amber-950/20 p-4 rounded-lg border border-amber-200 dark:border-amber-800",children:[(0,a.jsx)("h4",{className:"font-semibold text-amber-800 dark:text-amber-200 mb-2",children:"⚠️ Non-Manager Role"}),(0,a.jsxs)("p",{className:"text-amber-700 dark:text-amber-300 text-sm",children:['Your current role is "',e.role,'". Manager tools are only visible to users with "manager" or "admin" roles.']})]})]})]})})}},56104:(e,r,s)=>{"use strict";s.d(r,{EF:()=>x,IG:()=>u,KW:()=>g,PW:()=>f,V$:()=>h,db:()=>c,j2:()=>o,yA:()=>i,zV:()=>v});var a=s(23915),t=s(93004),l=s(35317),n=s(90858),d=s(81427);let i=(0,a.Dk)().length?(0,a.Sx)():(0,a.Wp)({apiKey:"AIzaSyBc3jmFE6dRXBApmWD9Jg2PO86suqGgaZw",authDomain:"leadflow-4lvrr.firebaseapp.com",projectId:"leadflow-4lvrr",storageBucket:"leadflow-4lvrr.firebasestorage.app",messagingSenderId:"13877630896",appId:"1:13877630896:web:ab7d2717024960ec36e875",measurementId:"G-KDEF2C21SH"}),o=(0,t.xI)(i),c=(0,l.aU)(i),u=(0,n.c7)(i),m=(0,d.Uz)(i),x=(0,d.Qg)(m,"acceptJob");(0,d.Qg)(m,"leadflowBot");let h=(0,d.Qg)(m,"inviteUser"),g=(0,d.Qg)(m,"updateAdminRoles"),v=(0,d.Qg)(m,"getTeamStats");(0,d.Qg)(m,"getDetailedAnalytics"),(0,d.Qg)(m,"generateAnalyticsReport");let f=async e=>await x({leadId:e})},59434:(e,r,s)=>{"use strict";s.d(r,{cn:()=>l});var a=s(52596),t=s(39688);function l(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return(0,t.QP)((0,a.$)(r))}},66695:(e,r,s)=>{"use strict";s.d(r,{BT:()=>o,Wu:()=>c,ZB:()=>i,Zp:()=>n,aR:()=>d,wL:()=>u});var a=s(95155),t=s(12115),l=s(59434);let n=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("rounded-xl border border-slate-200 bg-white text-card-foreground","shadow-lg shadow-slate-200/50 hover:shadow-xl hover:shadow-slate-300/50","transition-all duration-200 ease-in-out","dark:bg-slate-800/95 dark:border-slate-700/50 dark:shadow-lg dark:shadow-slate-900/25","dark:hover:shadow-xl dark:hover:shadow-slate-900/40","dark:ring-1 dark:ring-slate-700/50",s),...t})});n.displayName="Card";let d=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...t})});d.displayName="CardHeader";let i=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)("h3",{ref:r,className:(0,l.cn)("text-3xl font-bold font-headline leading-tight tracking-tight text-center",s),...t})});i.displayName="CardTitle";let o=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)("p",{ref:r,className:(0,l.cn)("text-sm text-muted-foreground text-center",s),...t})});o.displayName="CardDescription";let c=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("p-6 pt-0",s),...t})});c.displayName="CardContent";let u=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("flex items-center p-6 pt-0",s),...t})});u.displayName="CardFooter"},71640:(e,r,s)=>{Promise.resolve().then(s.bind(s,46400))},74466:(e,r,s)=>{"use strict";s.d(r,{F:()=>n});var a=s(52596);let t=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,l=a.$,n=(e,r)=>s=>{var a;if((null==r?void 0:r.variants)==null)return l(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:n,defaultVariants:d}=r,i=Object.keys(n).map(e=>{let r=null==s?void 0:s[e],a=null==d?void 0:d[e];if(null===r)return null;let l=t(r)||t(a);return n[e][l]}),o=s&&Object.entries(s).reduce((e,r)=>{let[s,a]=r;return void 0===a||(e[s]=a),e},{});return l(e,i,null==r||null==(a=r.compoundVariants)?void 0:a.reduce((e,r)=>{let{class:s,className:a,...t}=r;return Object.entries(t).every(e=>{let[r,s]=e;return Array.isArray(s)?s.includes({...d,...o}[r]):({...d,...o})[r]===s})?[...e,s,a]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)}},98030:(e,r,s)=>{"use strict";s.d(r,{A:()=>m,AuthProvider:()=>u});var a=s(95155),t=s(93004),l=s(35317),n=s(35695),d=s(12115),i=s(56104),o=s(50172);let c=(0,d.createContext)(void 0),u=e=>{let{children:r}=e,[s,u]=(0,d.useState)(null),[m,x]=(0,d.useState)(null),[h,g]=(0,d.useState)(!0),v=(0,n.useRouter)(),f=(0,n.usePathname)();(0,d.useEffect)(()=>{let e=(0,t.hg)(i.j2,async e=>{u(e),e||(x(null),g(!1))});return()=>e()},[]),(0,d.useEffect)(()=>{let e;if(s){g(!0);let r=(0,l.doc)(i.db,"users",s.uid);e=(0,l.aQ)(r,e=>{e.exists()?x({uid:s.uid,...e.data()}):x(null),g(!1)},()=>{x(null),g(!1)})}else x(null),g(!1);return()=>{e&&e()}},[s]),(0,d.useEffect)(()=>{h||m||"/login"===f||v.push("/login"),!h&&m&&"/login"===f&&v.push("/dashboard")},[m,h,v,f]);let b=async()=>{g(!0),await (0,t.CI)(i.j2),x(null),u(null),g(!1)};if(h&&"/login"!==f&&!m)return(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-background",children:(0,a.jsx)(o.A,{className:"h-12 w-12 animate-spin text-primary"})});let j={firebaseUser:s,user:m,loading:h,teamId:(null==m?void 0:m.teamId)||null,role:(null==m?void 0:m.role)||null,logout:b};return(0,a.jsx)(c.Provider,{value:j,children:r})},m=()=>{let e=(0,d.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{var r=r=>e(e.s=r);e.O(0,[2992,3644,5769,8248,8198,8441,1684,7358],()=>r(71640)),_N_E=e.O()}]);