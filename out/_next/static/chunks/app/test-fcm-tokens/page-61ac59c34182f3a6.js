(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4513],{17313:(e,t,r)=>{"use strict";r.d(t,{Xi:()=>c,av:()=>u,j7:()=>l,tU:()=>i});var n=r(95155),a=r(12115),s=r(60704),o=r(59434);let i=s.bL,l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.B8,{ref:t,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...a})});l.displayName=s.B8.displayName;let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.l9,{ref:t,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...a})});c.displayName=s.l9.displayName;let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.UC,{ref:t,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...a})});u.displayName=s.UC.displayName},49675:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var n=r(95155),a=r(12115),s=r(30285),o=r(66695),i=r(91689),l=r(12401),c=r(35317),u=r(56104),d=r(98030),f=r(17313);function m(){let{toast:e}=(0,i.dj)(),[t,r]=(0,a.useState)(null),[m,v]=(0,a.useState)(!1),[g,p]=(0,a.useState)(!1),[b,x]=(0,a.useState)([]),[h,j]=(0,a.useState)(!1),{user:y}=(0,d.A)();(0,a.useEffect)(()=>{!async function(){if(y){p(!0);try{let e=(0,c.doc)(u.db,"userTokens",y.uid),t=await (0,c.getDoc)(e);if(t.exists()){let e=t.data().tokens||[];x(e),e.includes("BKG3AGuGG29VYQc4WzjtGnDespL8rW8z6cobGPiml473TcdW9TLPINIHgBe3zzLfh3GzjF_S_64gDjqNKtxTESw")&&j(!0)}}catch(e){console.error("Error loading tokens:",e)}finally{p(!1)}}}()},[y]);let w=async()=>{if(!y)return void e({title:"Error",description:"You must be logged in to manage notification tokens",variant:"destructive"});v(!0);try{let t=await (0,l.mT)();if(t){r(t);let n=(0,c.doc)(u.db,"userTokens",y.uid),a=await (0,c.getDoc)(n);if(a.exists()){let e=a.data().tokens||[];e.includes(t)||(e.push(t),await (0,c.setDoc)(n,{tokens:e},{merge:!0}),x(e))}else{let e=[t];await (0,c.setDoc)(n,{tokens:e,userId:y.uid}),x(e)}e({title:"Success",description:"Notification token saved successfully"})}else e({title:"Error",description:"Failed to get notification token. Make sure notifications are enabled.",variant:"destructive"})}catch(t){console.error("Error getting FCM token:",t),e({title:"Error",description:"Failed to manage notification token: ".concat(t.message),variant:"destructive"})}finally{v(!1)}},k=async()=>{if(y){v(!0);try{let t=(0,c.doc)(u.db,"userTokens",y.uid),r=b.filter(e=>"BKG3AGuGG29VYQc4WzjtGnDespL8rW8z6cobGPiml473TcdW9TLPINIHgBe3zzLfh3GzjF_S_64gDjqNKtxTESw"!==e);await (0,c.setDoc)(t,{tokens:r},{merge:!0}),x(r),j(!1),e({title:"Success",description:"Invalid token removed successfully"})}catch(t){console.error("Error removing invalid token:",t),e({title:"Error",description:"Failed to remove invalid token: ".concat(t.message),variant:"destructive"})}finally{v(!1)}}};return(0,n.jsxs)(o.Zp,{className:"w-full max-w-md",children:[(0,n.jsxs)(o.aR,{children:[(0,n.jsx)(o.ZB,{children:"FCM Token Management"}),(0,n.jsx)(o.BT,{children:"Manage your Firebase Cloud Messaging tokens for push notifications"})]}),(0,n.jsxs)(o.Wu,{className:"space-y-4",children:[(0,n.jsxs)(f.tU,{defaultValue:"request",children:[(0,n.jsxs)(f.j7,{className:"grid w-full grid-cols-2",children:[(0,n.jsx)(f.Xi,{value:"request",children:"Request Token"}),(0,n.jsx)(f.Xi,{value:"manage",children:"Manage Tokens"})]}),(0,n.jsxs)(f.av,{value:"request",className:"space-y-4 pt-4",children:[(0,n.jsx)(s.$,{onClick:w,disabled:m||!y,className:"w-full",children:m?"Processing...":"Request & Save FCM Token"}),t&&(0,n.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,n.jsxs)("div",{className:"p-4 bg-blue-50 dark:bg-blue-950 text-blue-800 dark:text-blue-200 rounded-md",children:[(0,n.jsx)("h3",{className:"font-medium",children:"Your FCM Token:"}),(0,n.jsx)("p",{className:"text-xs break-all mt-2",children:t})]}),(0,n.jsx)(s.$,{onClick:()=>{t&&((0,l.F8)(t),e({title:"Debug Info",description:"Token debug information sent to console"}))},variant:"outline",className:"w-full",children:"Debug This Token"})]})]}),(0,n.jsxs)(f.av,{value:"manage",className:"space-y-4 pt-4",children:[g?(0,n.jsx)("div",{className:"text-center py-4",children:"Loading your tokens..."}):0===b.length?(0,n.jsx)("div",{className:"text-center py-4 text-muted-foreground",children:"No FCM tokens found for your account"}):(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("h3",{className:"font-medium",children:["Your Saved Tokens: (",b.length,")"]}),(0,n.jsx)("div",{className:"max-h-60 overflow-y-auto space-y-2",children:b.map((e,t)=>(0,n.jsx)("div",{className:"p-2 border rounded-md text-xs break-all",children:"BKG3AGuGG29VYQc4WzjtGnDespL8rW8z6cobGPiml473TcdW9TLPINIHgBe3zzLfh3GzjF_S_64gDjqNKtxTESw"===e?(0,n.jsxs)("div",{className:"text-red-600 font-bold",children:[e," (SUSPECTED INVALID)"]}):e},t))})]}),h&&(0,n.jsx)(s.$,{onClick:k,variant:"destructive",disabled:m,className:"w-full",children:m?"Processing...":"Remove Invalid Token"})]})]}),!y&&(0,n.jsx)("div",{className:"mt-4 p-4 bg-amber-50 dark:bg-amber-950 text-amber-800 dark:text-amber-200 rounded-md",children:(0,n.jsx)("p",{children:"Please log in to manage notification tokens."})})]})]})}function v(){return(0,n.jsx)("div",{className:"container mx-auto p-6 flex justify-center",children:(0,n.jsx)(m,{})})}},60704:(e,t,r)=>{"use strict";r.d(t,{B8:()=>F,UC:()=>R,bL:()=>D,l9:()=>I});var n=r(12115),a=r(85185),s=r(46081),o=r(89196),i=r(28905),l=r(63655),c=r(94315),u=r(5845),d=r(61285),f=r(95155),m="Tabs",[v,g]=(0,s.A)(m,[o.RG]),p=(0,o.RG)(),[b,x]=v(m),h=n.forwardRef((e,t)=>{let{__scopeTabs:r,value:n,onValueChange:a,defaultValue:s,orientation:o="horizontal",dir:i,activationMode:v="automatic",...g}=e,p=(0,c.jH)(i),[x,h]=(0,u.i)({prop:n,onChange:a,defaultProp:null!=s?s:"",caller:m});return(0,f.jsx)(b,{scope:r,baseId:(0,d.B)(),value:x,onValueChange:h,orientation:o,dir:p,activationMode:v,children:(0,f.jsx)(l.sG.div,{dir:p,"data-orientation":o,...g,ref:t})})});h.displayName=m;var j="TabsList",y=n.forwardRef((e,t)=>{let{__scopeTabs:r,loop:n=!0,...a}=e,s=x(j,r),i=p(r);return(0,f.jsx)(o.bL,{asChild:!0,...i,orientation:s.orientation,dir:s.dir,loop:n,children:(0,f.jsx)(l.sG.div,{role:"tablist","aria-orientation":s.orientation,...a,ref:t})})});y.displayName=j;var w="TabsTrigger",k=n.forwardRef((e,t)=>{let{__scopeTabs:r,value:n,disabled:s=!1,...i}=e,c=x(w,r),u=p(r),d=G(c.baseId,n),m=C(c.baseId,n),v=n===c.value;return(0,f.jsx)(o.q7,{asChild:!0,...u,focusable:!s,active:v,children:(0,f.jsx)(l.sG.button,{type:"button",role:"tab","aria-selected":v,"aria-controls":m,"data-state":v?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:d,...i,ref:t,onMouseDown:(0,a.m)(e.onMouseDown,e=>{s||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(n)}),onKeyDown:(0,a.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(n)}),onFocus:(0,a.m)(e.onFocus,()=>{let e="manual"!==c.activationMode;v||s||!e||c.onValueChange(n)})})})});k.displayName=w;var N="TabsContent",T=n.forwardRef((e,t)=>{let{__scopeTabs:r,value:a,forceMount:s,children:o,...c}=e,u=x(N,r),d=G(u.baseId,a),m=C(u.baseId,a),v=a===u.value,g=n.useRef(v);return n.useEffect(()=>{let e=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,f.jsx)(i.C,{present:s||v,children:r=>{let{present:n}=r;return(0,f.jsx)(l.sG.div,{"data-state":v?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":d,hidden:!n,id:m,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:g.current?"0s":void 0},children:n&&o})}})});function G(e,t){return"".concat(e,"-trigger-").concat(t)}function C(e,t){return"".concat(e,"-content-").concat(t)}T.displayName=N;var D=h,F=y,I=k,R=T},61285:(e,t,r)=>{"use strict";r.d(t,{B:()=>l});var n,a=r(12115),s=r(52712),o=(n||(n=r.t(a,2)))[" useId ".trim().toString()]||(()=>void 0),i=0;function l(e){let[t,r]=a.useState(o());return(0,s.N)(()=>{e||r(e=>e??String(i++))},[e]),e||(t?`radix-${t}`:"")}},69765:(e,t,r)=>{Promise.resolve().then(r.bind(r,49675))},89196:(e,t,r)=>{"use strict";r.d(t,{RG:()=>y,bL:()=>I,q7:()=>R});var n=r(12115),a=r(85185),s=r(37328),o=r(6101),i=r(46081),l=r(61285),c=r(63655),u=r(39033),d=r(5845),f=r(94315),m=r(95155),v="rovingFocusGroup.onEntryFocus",g={bubbles:!1,cancelable:!0},p="RovingFocusGroup",[b,x,h]=(0,s.N)(p),[j,y]=(0,i.A)(p,[h]),[w,k]=j(p),N=n.forwardRef((e,t)=>(0,m.jsx)(b.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,m.jsx)(b.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,m.jsx)(T,{...e,ref:t})})}));N.displayName=p;var T=n.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:s,loop:i=!1,dir:l,currentTabStopId:b,defaultCurrentTabStopId:h,onCurrentTabStopIdChange:j,onEntryFocus:y,preventScrollOnEntryFocus:k=!1,...N}=e,T=n.useRef(null),G=(0,o.s)(t,T),C=(0,f.jH)(l),[D,I]=(0,d.i)({prop:b,defaultProp:null!=h?h:null,onChange:j,caller:p}),[R,S]=n.useState(!1),E=(0,u.c)(y),A=x(r),L=n.useRef(!1),[z,B]=n.useState(0);return n.useEffect(()=>{let e=T.current;if(e)return e.addEventListener(v,E),()=>e.removeEventListener(v,E)},[E]),(0,m.jsx)(w,{scope:r,orientation:s,dir:C,loop:i,currentTabStopId:D,onItemFocus:n.useCallback(e=>I(e),[I]),onItemShiftTab:n.useCallback(()=>S(!0),[]),onFocusableItemAdd:n.useCallback(()=>B(e=>e+1),[]),onFocusableItemRemove:n.useCallback(()=>B(e=>e-1),[]),children:(0,m.jsx)(c.sG.div,{tabIndex:R||0===z?-1:0,"data-orientation":s,...N,ref:G,style:{outline:"none",...e.style},onMouseDown:(0,a.m)(e.onMouseDown,()=>{L.current=!0}),onFocus:(0,a.m)(e.onFocus,e=>{let t=!L.current;if(e.target===e.currentTarget&&t&&!R){let t=new CustomEvent(v,g);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=A().filter(e=>e.focusable);F([e.find(e=>e.active),e.find(e=>e.id===D),...e].filter(Boolean).map(e=>e.ref.current),k)}}L.current=!1}),onBlur:(0,a.m)(e.onBlur,()=>S(!1))})})}),G="RovingFocusGroupItem",C=n.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:s=!0,active:o=!1,tabStopId:i,children:u,...d}=e,f=(0,l.B)(),v=i||f,g=k(G,r),p=g.currentTabStopId===v,h=x(r),{onFocusableItemAdd:j,onFocusableItemRemove:y,currentTabStopId:w}=g;return n.useEffect(()=>{if(s)return j(),()=>y()},[s,j,y]),(0,m.jsx)(b.ItemSlot,{scope:r,id:v,focusable:s,active:o,children:(0,m.jsx)(c.sG.span,{tabIndex:p?0:-1,"data-orientation":g.orientation,...d,ref:t,onMouseDown:(0,a.m)(e.onMouseDown,e=>{s?g.onItemFocus(v):e.preventDefault()}),onFocus:(0,a.m)(e.onFocus,()=>g.onItemFocus(v)),onKeyDown:(0,a.m)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void g.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,r){var n;let a=(n=e.key,"rtl"!==r?n:"ArrowLeft"===n?"ArrowRight":"ArrowRight"===n?"ArrowLeft":n);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(a))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(a)))return D[a]}(e,g.orientation,g.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let r=h().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)r.reverse();else if("prev"===t||"next"===t){"prev"===t&&r.reverse();let n=r.indexOf(e.currentTarget);r=g.loop?function(e,t){return e.map((r,n)=>e[(t+n)%e.length])}(r,n+1):r.slice(n+1)}setTimeout(()=>F(r))}}),children:"function"==typeof u?u({isCurrentTabStop:p,hasTabStop:null!=w}):u})})});C.displayName=G;var D={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function F(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=document.activeElement;for(let n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}var I=N,R=C},94315:(e,t,r)=>{"use strict";r.d(t,{jH:()=>s});var n=r(12115);r(95155);var a=n.createContext(void 0);function s(e){let t=n.useContext(a);return e||t||"ltr"}}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,3644,5769,8248,8198,8108,470,996,4280,8441,1684,7358],()=>t(69765)),_N_E=e.O()}]);