(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7763],{15452:(e,t,r)=>{"use strict";r.d(t,{G$:()=>J,Hs:()=>N,UC:()=>er,VY:()=>ea,ZL:()=>ee,bL:()=>z,bm:()=>el,hE:()=>en,hJ:()=>et,l9:()=>X});var n=r(12115),a=r(85185),l=r(6101),s=r(46081),o=r(61285),i=r(5845),d=r(19178),c=r(25519),u=r(34378),m=r(28905),p=r(63655),f=r(92293),h=r(31114),g=r(38168),x=r(99708),v=r(95155),j="Dialog",[y,N]=(0,s.A)(j),[b,D]=y(j),w=e=>{let{__scopeDialog:t,children:r,open:a,defaultOpen:l,onOpenChange:s,modal:d=!0}=e,c=n.useRef(null),u=n.useRef(null),[m,p]=(0,i.i)({prop:a,defaultProp:null!=l&&l,onChange:s,caller:j});return(0,v.jsx)(b,{scope:t,triggerRef:c,contentRef:u,contentId:(0,o.B)(),titleId:(0,o.B)(),descriptionId:(0,o.B)(),open:m,onOpenChange:p,onOpenToggle:n.useCallback(()=>p(e=>!e),[p]),modal:d,children:r})};w.displayName=j;var C="DialogTrigger",R=n.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,s=D(C,r),o=(0,l.s)(t,s.triggerRef);return(0,v.jsx)(p.sG.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":V(s.open),...n,ref:o,onClick:(0,a.m)(e.onClick,s.onOpenToggle)})});R.displayName=C;var I="DialogPortal",[E,O]=y(I,{forceMount:void 0}),_=e=>{let{__scopeDialog:t,forceMount:r,children:a,container:l}=e,s=D(I,t);return(0,v.jsx)(E,{scope:t,forceMount:r,children:n.Children.map(a,e=>(0,v.jsx)(m.C,{present:r||s.open,children:(0,v.jsx)(u.Z,{asChild:!0,container:l,children:e})}))})};_.displayName=I;var A="DialogOverlay",F=n.forwardRef((e,t)=>{let r=O(A,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,l=D(A,e.__scopeDialog);return l.modal?(0,v.jsx)(m.C,{present:n||l.open,children:(0,v.jsx)(P,{...a,ref:t})}):null});F.displayName=A;var k=(0,x.TL)("DialogOverlay.RemoveScroll"),P=n.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,a=D(A,r);return(0,v.jsx)(h.A,{as:k,allowPinchZoom:!0,shards:[a.contentRef],children:(0,v.jsx)(p.sG.div,{"data-state":V(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),M="DialogContent",B=n.forwardRef((e,t)=>{let r=O(M,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,l=D(M,e.__scopeDialog);return(0,v.jsx)(m.C,{present:n||l.open,children:l.modal?(0,v.jsx)(q,{...a,ref:t}):(0,v.jsx)(G,{...a,ref:t})})});B.displayName=M;var q=n.forwardRef((e,t)=>{let r=D(M,e.__scopeDialog),s=n.useRef(null),o=(0,l.s)(t,r.contentRef,s);return n.useEffect(()=>{let e=s.current;if(e)return(0,g.Eq)(e)},[]),(0,v.jsx)(S,{...e,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,a.m)(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null==(t=r.triggerRef.current)||t.focus()}),onPointerDownOutside:(0,a.m)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:(0,a.m)(e.onFocusOutside,e=>e.preventDefault())})}),G=n.forwardRef((e,t)=>{let r=D(M,e.__scopeDialog),a=n.useRef(!1),l=n.useRef(!1);return(0,v.jsx)(S,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var n,s;null==(n=e.onCloseAutoFocus)||n.call(e,t),t.defaultPrevented||(a.current||null==(s=r.triggerRef.current)||s.focus(),t.preventDefault()),a.current=!1,l.current=!1},onInteractOutside:t=>{var n,s;null==(n=e.onInteractOutside)||n.call(e,t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(l.current=!0));let o=t.target;(null==(s=r.triggerRef.current)?void 0:s.contains(o))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&l.current&&t.preventDefault()}})}),S=n.forwardRef((e,t)=>{let{__scopeDialog:r,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:o,...i}=e,u=D(M,r),m=n.useRef(null),p=(0,l.s)(t,m);return(0,f.Oh)(),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(c.n,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:s,onUnmountAutoFocus:o,children:(0,v.jsx)(d.qW,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":V(u.open),...i,ref:p,onDismiss:()=>u.onOpenChange(!1)})}),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Q,{titleId:u.titleId}),(0,v.jsx)($,{contentRef:m,descriptionId:u.descriptionId})]})]})}),T="DialogTitle",L=n.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,a=D(T,r);return(0,v.jsx)(p.sG.h2,{id:a.titleId,...n,ref:t})});L.displayName=T;var W="DialogDescription",Z=n.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,a=D(W,r);return(0,v.jsx)(p.sG.p,{id:a.descriptionId,...n,ref:t})});Z.displayName=W;var H="DialogClose",U=n.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,l=D(H,r);return(0,v.jsx)(p.sG.button,{type:"button",...n,ref:t,onClick:(0,a.m)(e.onClick,()=>l.onOpenChange(!1))})});function V(e){return e?"open":"closed"}U.displayName=H;var Y="DialogTitleWarning",[J,K]=(0,s.q)(Y,{contentName:M,titleName:T,docsSlug:"dialog"}),Q=e=>{let{titleId:t}=e,r=K(Y),a="`".concat(r.contentName,"` requires a `").concat(r.titleName,"` for the component to be accessible for screen reader users.\n\nIf you want to hide the `").concat(r.titleName,"`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/").concat(r.docsSlug);return n.useEffect(()=>{t&&(document.getElementById(t)||console.error(a))},[a,t]),null},$=e=>{let{contentRef:t,descriptionId:r}=e,a=K("DialogDescriptionWarning"),l="Warning: Missing `Description` or `aria-describedby={undefined}` for {".concat(a.contentName,"}.");return n.useEffect(()=>{var e;let n=null==(e=t.current)?void 0:e.getAttribute("aria-describedby");r&&n&&(document.getElementById(r)||console.warn(l))},[l,t,r]),null},z=w,X=R,ee=_,et=F,er=B,en=L,ea=Z,el=U},51245:(e,t,r)=>{Promise.resolve().then(r.bind(r,59445))},59445:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(95155),a=r(12115),l=r(98030),s=r(91689),o=r(56104),i=r(35317),d=r(22715),c=r(66695),u=r(50172);let m=(0,r(40157).A)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var p=r(66424),f=r(35695);function h(){let{user:e,loading:t}=(0,l.A)(),{toast:r}=(0,s.dj)(),h=(0,f.useRouter)(),[g,x]=(0,a.useState)([]),[v,j]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{if(!t&&(!e||"manager"!==e.role&&"admin"!==e.role))return void h.replace(e?"/dashboard":"/login");if(e&&e.teamId&&("manager"===e.role||"admin"===e.role)){j(!0);let t=(0,i.query)((0,i.collection)(o.db,"leads"),(0,i.where)("teamId","==",e.teamId),(0,i.My)("createdAt","desc"),(0,i.AB)(40)),n=(0,i.aQ)(t,e=>{x(e.docs.map(e=>({id:e.id,...e.data()}))),j(!1)},e=>{r({title:"Error",description:"Failed to load leads. Please refresh the page.",variant:"destructive"}),j(!1)});return()=>n()}},[e,t,h,r]),t||v)?(0,n.jsx)("div",{className:"flex min-h-[calc(100vh-var(--header-height,4rem))] items-center justify-center",children:(0,n.jsx)(u.A,{className:"h-12 w-12 animate-spin text-primary"})}):(null==e?void 0:e.role)!=="manager"?(0,n.jsx)("div",{className:"flex min-h-[calc(100vh-var(--header-height,4rem))] items-center justify-center",children:(0,n.jsx)("p",{className:"text-destructive",children:"Access Denied. You must be a manager to view this page."})}):(0,n.jsx)("div",{className:"container mx-auto py-8",children:(0,n.jsxs)(c.Zp,{className:"shadow-xl",children:[(0,n.jsx)(c.aR,{className:"px-4 sm:px-6",children:(0,n.jsxs)(c.ZB,{className:"text-2xl sm:text-3xl font-bold font-headline flex items-center justify-center",children:[(0,n.jsx)(m,{className:"mr-2 sm:mr-3 h-6 w-6 sm:h-8 sm:w-8 text-primary"}),"All Submitted Leads"]})}),(0,n.jsx)(c.Wu,{className:"px-4 sm:px-6",children:0!==g.length||v?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(p.F,{className:"h-[calc(100vh-20rem)] sm:h-[calc(100vh-18rem)] md:h-[calc(100vh-16rem)] lg:h-[calc(100vh-14rem)] pr-3 sm:pr-4",children:[" ",(0,n.jsx)("div",{className:"grid grid-cols-1 gap-3 sm:gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:g.map(e=>(0,n.jsx)(d.A,{lead:e,context:"all-leads"},e.id))})]}),g.length>=40&&(0,n.jsx)("p",{className:"mt-6 text-center text-sm text-muted-foreground",children:'Consider implementing pagination or a "load more" feature for older leads.'})]}):(0,n.jsx)("div",{className:"flex h-64 items-center justify-center",children:(0,n.jsx)("p",{className:"text-muted-foreground",children:"No leads found for your team."})})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,3644,5769,8248,8198,8108,587,470,5152,1859,7692,381,6214,4315,62,7238,5434,5146,8441,1684,7358],()=>t(51245)),_N_E=e.O()}]);