(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2867],{17313:(e,i,s)=>{"use strict";s.d(i,{Xi:()=>c,av:()=>o,j7:()=>l,tU:()=>d});var t=s(95155),a=s(12115),n=s(60704),r=s(59434);let d=n.bL,l=a.forwardRef((e,i)=>{let{className:s,...a}=e;return(0,t.jsx)(n.B8,{ref:i,className:(0,r.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...a})});l.displayName=n.B8.displayName;let c=a.forwardRef((e,i)=>{let{className:s,...a}=e;return(0,t.jsx)(n.l9,{ref:i,className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...a})});c.displayName=n.l9.displayName;let o=a.forwardRef((e,i)=>{let{className:s,...a}=e;return(0,t.jsx)(n.UC,{ref:i,className:(0,r.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a})});o.displayName=n.UC.displayName},26126:(e,i,s)=>{"use strict";s.d(i,{E:()=>d});var t=s(95155);s(12115);var a=s(74466),n=s(59434);let r=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:i,variant:s,...a}=e;return(0,t.jsx)("div",{className:(0,n.cn)(r({variant:s}),i),...a})}},41513:(e,i,s)=>{"use strict";s.r(i),s.d(i,{default:()=>E});var t=s(95155),a=s(12115),n=s(50172),r=s(28044),d=s(81008),l=s(83662),c=s(18046),o=s(83173),m=s(38224),h=s(23129),g=s(77223),x=s(79311),u=s(50286),v=s(98030),p=s(35695),j=s(66695),f=s(30285),b=s(62523),N=s(88539),C=s(26126),y=s(17313),A=s(54165),w=s(85057),k=s(80333),T=s(59409),F=s(91689),I=s(56104),R=s(35317);function E(){var e,i,s,E,J,D,P,H,U;let{user:z,loading:L}=(0,v.A)(),S=(0,p.useRouter)(),{toast:_}=(0,F.dj)(),[M,V]=(0,a.useState)([]),[$,q]=(0,a.useState)([]),[B,Z]=(0,a.useState)(!0),[O,W]=(0,a.useState)(!1),[G,X]=(0,a.useState)(!1),[Y,Q]=(0,a.useState)(!1),[K,ee]=(0,a.useState)(!1),[ei,es]=(0,a.useState)(null),[et,ea]=(0,a.useState)(null),[en,er]=(0,a.useState)(null),[ed,el]=(0,a.useState)({name:"",description:"",isActive:!0,chatChannelId:""}),[ec,eo]=(0,a.useState)({name:"",description:"",regionId:"",isActive:!0,logoUrl:"",chatChannelId:"",settings:{autoAssignment:!0,maxLeadsPerCloser:12,workingHours:{start:"07:00",end:"22:00",timezone:"America/Los_Angeles"}}});(0,a.useEffect)(()=>{!L&&z&&"admin"!==z.role&&S.replace("/dashboard")},[z,L,S]),(0,a.useEffect)(()=>{if(!z||"admin"!==z.role)return;let e=(0,R.query)((0,R.collection)(I.db,"regions"),(0,R.My)("createdAt","desc")),i=(0,R.query)((0,R.collection)(I.db,"teams"),(0,R.My)("createdAt","desc")),s=(0,R.aQ)(e,e=>{V(e.docs.map(e=>({id:e.id,...e.data()})))}),t=(0,R.aQ)(i,e=>{q(e.docs.map(e=>({id:e.id,...e.data()}))),Z(!1)});return()=>{s(),t()}},[z]);let em=async()=>{if(!ed.name.trim())return void _({title:"Validation Error",description:"Region name is required",variant:"destructive"});try{await (0,R.gS)((0,R.collection)(I.db,"regions"),{...ed,name:ed.name.trim(),description:ed.description.trim(),createdAt:(0,R.serverTimestamp)(),updatedAt:(0,R.serverTimestamp)()}),_({title:"Region Created",description:'Region "'.concat(ed.name,'" has been created successfully!')}),el({name:"",description:"",isActive:!0,chatChannelId:""}),W(!1)}catch(e){console.error("Error creating region:",e),_({title:"Creation Failed",description:"Failed to create region. Please try again.",variant:"destructive"})}},eh=async()=>{if(!ec.name.trim())return void _({title:"Validation Error",description:"Team name is required",variant:"destructive"});if(!ec.regionId)return void _({title:"Validation Error",description:"Please select a region for this team",variant:"destructive"});try{await (0,R.gS)((0,R.collection)(I.db,"teams"),{...ec,name:ec.name.trim(),description:ec.description.trim(),createdAt:(0,R.serverTimestamp)(),updatedAt:(0,R.serverTimestamp)()});let e=M.find(e=>e.id===ec.regionId);_({title:"Team Created",description:'Team "'.concat(ec.name,'" has been created in ').concat(null==e?void 0:e.name," region!")}),eo({name:"",description:"",regionId:"",isActive:!0,logoUrl:"",chatChannelId:"",settings:{autoAssignment:!0,maxLeadsPerCloser:12,workingHours:{start:"07:00",end:"22:00",timezone:"America/Los_Angeles"}}}),X(!1)}catch(e){console.error("Error creating team:",e),_({title:"Creation Failed",description:"Failed to create team. Please try again.",variant:"destructive"})}},eg=async(e,i)=>{try{await (0,R.updateDoc)((0,R.doc)(I.db,"regions",e),{isActive:i,updatedAt:(0,R.serverTimestamp)()}),_({title:"Region Updated",description:"Region has been ".concat(i?"activated":"deactivated")})}catch(e){console.error("Error updating region:",e),_({title:"Update Failed",description:"Failed to update region status",variant:"destructive"})}},ex=async(e,i)=>{try{await (0,R.updateDoc)((0,R.doc)(I.db,"teams",e),{isActive:i,updatedAt:(0,R.serverTimestamp)()}),_({title:"Team Updated",description:"Team has been ".concat(i?"activated":"deactivated")})}catch(e){console.error("Error updating team:",e),_({title:"Update Failed",description:"Failed to update team status",variant:"destructive"})}},eu=async e=>{let i=$.filter(i=>i.regionId===e);if(i.length>0)return void _({title:"Cannot Delete Region",description:"This region has ".concat(i.length," teams. Please move or delete teams first."),variant:"destructive"});try{await (0,R.kd)((0,R.doc)(I.db,"regions",e)),_({title:"Region Deleted",description:"Region has been deleted successfully"})}catch(e){console.error("Error deleting region:",e),_({title:"Delete Failed",description:"Failed to delete region. Please try again.",variant:"destructive"})}},ev=async e=>{try{await (0,R.kd)((0,R.doc)(I.db,"teams",e)),_({title:"Team Deleted",description:"Team has been deleted successfully"})}catch(e){console.error("Error deleting team:",e),_({title:"Delete Failed",description:"Failed to delete team. Please try again.",variant:"destructive"})}},ep=e=>{es(e),Q(!0)},ej=async()=>{if(!ei||!ei.name.trim())return void _({title:"Validation Error",description:"Region name is required",variant:"destructive"});try{var e;await (0,R.updateDoc)((0,R.doc)(I.db,"regions",ei.id),{name:ei.name.trim(),description:ei.description.trim(),isActive:ei.isActive,chatChannelId:(null==(e=ei.chatChannelId)?void 0:e.trim())||"",updatedAt:(0,R.serverTimestamp)()}),_({title:"Region Updated",description:'Region "'.concat(ei.name,'" has been updated successfully!')}),es(null),Q(!1)}catch(e){console.error("Error updating region:",e),_({title:"Update Failed",description:"Failed to update region. Please try again.",variant:"destructive"})}},ef=e=>{ea(e),ee(!0)},eb=async e=>{let i="https://via.placeholder.com/100x100/6366f1/ffffff?text=".concat(e.name.charAt(0).toUpperCase());return await new Promise(e=>setTimeout(e,1e3)),i},eN=async()=>{if(!et||!et.name.trim())return void _({title:"Validation Error",description:"Team name is required",variant:"destructive"});if(!et.regionId)return void _({title:"Validation Error",description:"Please select a region for this team",variant:"destructive"});try{var e;let i=et.logoUrl;en&&(i=await eb(en)),await (0,R.updateDoc)((0,R.doc)(I.db,"teams",et.id),{name:et.name.trim(),description:et.description.trim(),regionId:et.regionId,isActive:et.isActive,logoUrl:i||"",chatChannelId:(null==(e=et.chatChannelId)?void 0:e.trim())||"",settings:et.settings,updatedAt:(0,R.serverTimestamp)()}),M.find(e=>e.id===et.regionId),_({title:"Team Updated",description:'Team "'.concat(et.name,'" has been updated successfully!')}),ea(null),ee(!1),er(null)}catch(e){console.error("Error updating team:",e),_({title:"Update Failed",description:"Failed to update team. Please try again.",variant:"destructive"})}};return L||B?(0,t.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,t.jsx)(n.A,{className:"h-10 w-10 animate-spin text-primary"})}):z&&"admin"===z.role?(0,t.jsxs)("div",{className:"container py-10 space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[(0,t.jsx)(d.A,{className:"h-8 w-8 text-primary"}),"Admin Tools"]}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2",children:"Manage regions, teams, and administrative functions"})]})}),(0,t.jsxs)(y.tU,{defaultValue:"regions",className:"space-y-6",children:[(0,t.jsxs)(y.j7,{className:"grid w-full grid-cols-2",children:[(0,t.jsx)(y.Xi,{value:"regions",children:"Regions"}),(0,t.jsx)(y.Xi,{value:"teams",children:"Teams"})]}),(0,t.jsx)(y.av,{value:"regions",className:"space-y-6",children:(0,t.jsxs)(j.Zp,{children:[(0,t.jsx)(j.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(j.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(l.A,{className:"h-5 w-5 text-primary"}),"Region Management"]}),(0,t.jsx)(j.BT,{children:"Create and manage regional divisions"})]}),(0,t.jsxs)(A.lG,{open:O,onOpenChange:W,children:[(0,t.jsx)(A.zM,{asChild:!0,children:(0,t.jsxs)(f.$,{children:[(0,t.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Create Region"]})}),(0,t.jsxs)(A.Cf,{children:[(0,t.jsxs)(A.c7,{children:[(0,t.jsx)(A.L3,{children:"Create New Region"}),(0,t.jsx)(A.rr,{children:"Add a new regional division to organize teams"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(w.J,{htmlFor:"region-name",children:"Region Name"}),(0,t.jsx)(b.p,{id:"region-name",value:ed.name,onChange:e=>el({...ed,name:e.target.value}),placeholder:"e.g., North America, Europe, Asia Pacific"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(w.J,{htmlFor:"region-description",children:"Description"}),(0,t.jsx)(N.T,{id:"region-description",value:ed.description,onChange:e=>el({...ed,description:e.target.value}),placeholder:"Describe this region's purpose and scope"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(w.J,{htmlFor:"region-chat",children:"Chat Channel ID"}),(0,t.jsx)(b.p,{id:"region-chat",value:ed.chatChannelId,onChange:e=>el({...ed,chatChannelId:e.target.value}),placeholder:"e.g., region-north-america-chat"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(k.d,{id:"region-active",checked:ed.isActive,onCheckedChange:e=>el({...ed,isActive:e})}),(0,t.jsx)(w.J,{htmlFor:"region-active",children:"Active Region"})]}),(0,t.jsx)(f.$,{onClick:em,className:"w-full",children:"Create Region"})]})]})]})]})}),(0,t.jsx)(A.lG,{open:Y,onOpenChange:Q,children:(0,t.jsxs)(A.Cf,{children:[(0,t.jsxs)(A.c7,{children:[(0,t.jsx)(A.L3,{children:"Edit Region"}),(0,t.jsx)(A.rr,{children:"Update region information and settings"})]}),ei&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(w.J,{htmlFor:"edit-region-name",children:"Region Name"}),(0,t.jsx)(b.p,{id:"edit-region-name",value:ei.name,onChange:e=>es({...ei,name:e.target.value}),placeholder:"e.g., North America, Europe, Asia Pacific"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(w.J,{htmlFor:"edit-region-description",children:"Description"}),(0,t.jsx)(N.T,{id:"edit-region-description",value:ei.description,onChange:e=>es({...ei,description:e.target.value}),placeholder:"Describe this region's purpose and scope"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(w.J,{htmlFor:"edit-region-chat",children:"Chat Channel ID"}),(0,t.jsx)(b.p,{id:"edit-region-chat",value:ei.chatChannelId||"",onChange:e=>es({...ei,chatChannelId:e.target.value}),placeholder:"e.g., region-north-america-chat"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(k.d,{id:"edit-region-active",checked:ei.isActive,onCheckedChange:e=>es({...ei,isActive:e})}),(0,t.jsx)(w.J,{htmlFor:"edit-region-active",children:"Active Region"})]}),(0,t.jsx)(f.$,{onClick:ej,className:"w-full",children:"Update Region"})]})]})}),(0,t.jsx)(j.Wu,{children:0===M.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(l.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No Regions Found"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"Create your first region to organize teams by geographic or business divisions."})]}):(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:M.map(e=>(0,t.jsxs)(j.Zp,{className:"relative",children:[(0,t.jsxs)(j.aR,{className:"pb-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(j.ZB,{className:"text-lg",children:e.name}),(0,t.jsx)(C.E,{variant:e.isActive?"default":"secondary",children:e.isActive?"Active":"Inactive"})]}),e.description&&(0,t.jsx)(j.BT,{children:e.description})]}),(0,t.jsx)(j.Wu,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(o.A,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:[$.filter(i=>i.regionId===e.id).length," teams"]})]}),e.chatChannelId&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(m.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"font-mono text-xs",children:e.chatChannelId})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(f.$,{variant:"outline",size:"sm",onClick:()=>eg(e.id,!e.isActive),children:e.isActive?"Deactivate":"Activate"}),(0,t.jsx)(f.$,{variant:"outline",size:"sm",onClick:()=>ep(e),children:(0,t.jsx)(h.A,{className:"h-4 w-4"})})]}),(0,t.jsx)(f.$,{variant:"destructive",size:"sm",onClick:()=>eu(e.id),children:(0,t.jsx)(g.A,{className:"h-4 w-4"})})]})]})})]},e.id))})})]})}),(0,t.jsx)(y.av,{value:"teams",className:"space-y-6",children:(0,t.jsxs)(j.Zp,{children:[(0,t.jsx)(j.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(j.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(o.A,{className:"h-5 w-5 text-primary"}),"Team Management"]}),(0,t.jsx)(j.BT,{children:"Create and manage teams within regions"})]}),(0,t.jsxs)(A.lG,{open:G,onOpenChange:X,children:[(0,t.jsx)(A.zM,{asChild:!0,children:(0,t.jsxs)(f.$,{disabled:0===M.length,children:[(0,t.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Create Team"]})}),(0,t.jsxs)(A.Cf,{className:"max-w-2xl",children:[(0,t.jsxs)(A.c7,{children:[(0,t.jsx)(A.L3,{children:"Create New Team"}),(0,t.jsx)(A.rr,{children:"Add a new team to a region"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(w.J,{htmlFor:"team-name",children:"Team Name"}),(0,t.jsx)(b.p,{id:"team-name",value:ec.name,onChange:e=>eo({...ec,name:e.target.value}),placeholder:"e.g., Empire, Thunder"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(w.J,{htmlFor:"team-region",children:"Region"}),(0,t.jsxs)(T.l6,{value:ec.regionId,onValueChange:e=>eo({...ec,regionId:e}),children:[(0,t.jsx)(T.bq,{children:(0,t.jsx)(T.yv,{placeholder:"Select a region"})}),(0,t.jsx)(T.gC,{children:M.filter(e=>e.isActive).map(e=>(0,t.jsx)(T.eb,{value:e.id,children:e.name},e.id))})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(w.J,{htmlFor:"team-description",children:"Description"}),(0,t.jsx)(N.T,{id:"team-description",value:ec.description,onChange:e=>eo({...ec,description:e.target.value}),placeholder:"Describe this team's role and responsibilities"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(w.J,{htmlFor:"team-chat",children:"Chat Channel ID"}),(0,t.jsx)(b.p,{id:"team-chat",value:ec.chatChannelId,onChange:e=>eo({...ec,chatChannelId:e.target.value}),placeholder:"e.g., team-empire-chat"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(w.J,{htmlFor:"max-leads",children:"Max Leads Per Closer"}),(0,t.jsx)(b.p,{id:"max-leads",type:"number",value:ec.settings.maxLeadsPerCloser,onChange:e=>eo({...ec,settings:{...ec.settings,maxLeadsPerCloser:parseInt(e.target.value)||12}}),min:"1",max:"50"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 pt-6",children:[(0,t.jsx)(k.d,{id:"auto-assignment",checked:ec.settings.autoAssignment,onCheckedChange:e=>eo({...ec,settings:{...ec.settings,autoAssignment:e}})}),(0,t.jsx)(w.J,{htmlFor:"auto-assignment",children:"Auto Assignment"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(w.J,{htmlFor:"start-time",children:"Start Time"}),(0,t.jsx)(b.p,{id:"start-time",type:"time",value:ec.settings.workingHours.start,onChange:e=>eo({...ec,settings:{...ec.settings,workingHours:{...ec.settings.workingHours,start:e.target.value}}})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(w.J,{htmlFor:"end-time",children:"End Time"}),(0,t.jsx)(b.p,{id:"end-time",type:"time",value:ec.settings.workingHours.end,onChange:e=>eo({...ec,settings:{...ec.settings,workingHours:{...ec.settings.workingHours,end:e.target.value}}})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(w.J,{htmlFor:"timezone",children:"Timezone"}),(0,t.jsxs)(T.l6,{value:ec.settings.workingHours.timezone,onValueChange:e=>eo({...ec,settings:{...ec.settings,workingHours:{...ec.settings.workingHours,timezone:e}}}),children:[(0,t.jsx)(T.bq,{children:(0,t.jsx)(T.yv,{})}),(0,t.jsxs)(T.gC,{children:[(0,t.jsx)(T.eb,{value:"America/Los_Angeles",children:"Pacific"}),(0,t.jsx)(T.eb,{value:"America/Denver",children:"Mountain"}),(0,t.jsx)(T.eb,{value:"America/Chicago",children:"Central"}),(0,t.jsx)(T.eb,{value:"America/New_York",children:"Eastern"})]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(k.d,{id:"team-active",checked:ec.isActive,onCheckedChange:e=>eo({...ec,isActive:e})}),(0,t.jsx)(w.J,{htmlFor:"team-active",children:"Active Team"})]}),(0,t.jsx)(f.$,{onClick:eh,className:"w-full",children:"Create Team"})]})]})]})]})}),(0,t.jsx)(A.lG,{open:K,onOpenChange:ee,children:(0,t.jsxs)(A.Cf,{className:"max-w-2xl",children:[(0,t.jsxs)(A.c7,{children:[(0,t.jsx)(A.L3,{children:"Edit Team"}),(0,t.jsx)(A.rr,{children:"Update team information and settings"})]}),et&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(w.J,{htmlFor:"edit-team-name",children:"Team Name"}),(0,t.jsx)(b.p,{id:"edit-team-name",value:et.name,onChange:e=>ea({...et,name:e.target.value}),placeholder:"e.g., Empire, Thunder"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(w.J,{htmlFor:"edit-team-region",children:"Region"}),(0,t.jsxs)(T.l6,{value:et.regionId,onValueChange:e=>ea({...et,regionId:e}),children:[(0,t.jsx)(T.bq,{children:(0,t.jsx)(T.yv,{placeholder:"Select a region"})}),(0,t.jsx)(T.gC,{children:M.filter(e=>e.isActive).map(e=>(0,t.jsx)(T.eb,{value:e.id,children:e.name},e.id))})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(w.J,{htmlFor:"edit-team-description",children:"Description"}),(0,t.jsx)(N.T,{id:"edit-team-description",value:et.description,onChange:e=>ea({...et,description:e.target.value}),placeholder:"Describe this team's role and responsibilities"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(w.J,{htmlFor:"edit-team-chat",children:"Chat Channel ID"}),(0,t.jsx)(b.p,{id:"edit-team-chat",value:et.chatChannelId||"",onChange:e=>ea({...et,chatChannelId:e.target.value}),placeholder:"e.g., team-empire-chat"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(w.J,{htmlFor:"edit-team-logo",children:"Team Logo"}),(0,t.jsx)(b.p,{id:"edit-team-logo",type:"file",accept:"image/*",onChange:e=>{var i;return er((null==(i=e.target.files)?void 0:i[0])||null)}}),et.logoUrl&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Current logo uploaded"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(w.J,{htmlFor:"edit-max-leads",children:"Max Leads Per Closer"}),(0,t.jsx)(b.p,{id:"edit-max-leads",type:"number",value:(null==(e=et.settings)?void 0:e.maxLeadsPerCloser)||12,onChange:e=>ea({...et,settings:{...et.settings,maxLeadsPerCloser:parseInt(e.target.value)||12}}),min:"1",max:"50"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 pt-6",children:[(0,t.jsx)(k.d,{id:"edit-auto-assignment",checked:null==(U=null==(i=et.settings)?void 0:i.autoAssignment)||U,onCheckedChange:e=>ea({...et,settings:{...et.settings,autoAssignment:e}})}),(0,t.jsx)(w.J,{htmlFor:"edit-auto-assignment",children:"Auto Assignment"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(w.J,{htmlFor:"edit-start-time",children:"Start Time"}),(0,t.jsx)(b.p,{id:"edit-start-time",type:"time",value:(null==(E=et.settings)||null==(s=E.workingHours)?void 0:s.start)||"07:00",onChange:e=>{var i;return ea({...et,settings:{...et.settings,workingHours:{...null==(i=et.settings)?void 0:i.workingHours,start:e.target.value}}})}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(w.J,{htmlFor:"edit-end-time",children:"End Time"}),(0,t.jsx)(b.p,{id:"edit-end-time",type:"time",value:(null==(D=et.settings)||null==(J=D.workingHours)?void 0:J.end)||"22:00",onChange:e=>{var i;return ea({...et,settings:{...et.settings,workingHours:{...null==(i=et.settings)?void 0:i.workingHours,end:e.target.value}}})}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(w.J,{htmlFor:"edit-timezone",children:"Timezone"}),(0,t.jsxs)(T.l6,{value:(null==(H=et.settings)||null==(P=H.workingHours)?void 0:P.timezone)||"America/Los_Angeles",onValueChange:e=>{var i;return ea({...et,settings:{...et.settings,workingHours:{...null==(i=et.settings)?void 0:i.workingHours,timezone:e}}})},children:[(0,t.jsx)(T.bq,{children:(0,t.jsx)(T.yv,{})}),(0,t.jsxs)(T.gC,{children:[(0,t.jsx)(T.eb,{value:"America/Los_Angeles",children:"Pacific"}),(0,t.jsx)(T.eb,{value:"America/Denver",children:"Mountain"}),(0,t.jsx)(T.eb,{value:"America/Chicago",children:"Central"}),(0,t.jsx)(T.eb,{value:"America/New_York",children:"Eastern"})]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(k.d,{id:"edit-team-active",checked:et.isActive,onCheckedChange:e=>ea({...et,isActive:e})}),(0,t.jsx)(w.J,{htmlFor:"edit-team-active",children:"Active Team"})]}),(0,t.jsx)(f.$,{onClick:eN,className:"w-full",children:"Update Team"})]})]})}),(0,t.jsx)(j.Wu,{children:0===$.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(o.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No Teams Found"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:0===M.length?"Create a region first, then add teams to organize your workforce.":"Create your first team within a region to get started."})]}):(0,t.jsx)("div",{className:"space-y-4",children:M.map(e=>{let i=$.filter(i=>i.regionId===e.id);return 0===i.length?null:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.A,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("h3",{className:"font-semibold text-lg",children:e.name}),(0,t.jsxs)(C.E,{variant:"outline",children:[i.length," teams"]})]}),(0,t.jsx)("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3 ml-6",children:i.map(e=>{var i,s;return(0,t.jsxs)(j.Zp,{className:"relative",children:[(0,t.jsxs)(j.aR,{className:"pb-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[e.logoUrl&&(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-primary/20 to-primary/10 flex items-center justify-center",children:(0,t.jsx)(x.A,{className:"w-6 h-6 text-primary"})}),(0,t.jsx)(j.ZB,{className:"text-base",children:e.name})]}),(0,t.jsx)(C.E,{variant:e.isActive?"default":"secondary",children:e.isActive?"Active":"Inactive"})]}),e.description&&(0,t.jsx)(j.BT,{className:"text-sm",children:e.description})]}),(0,t.jsx)(j.Wu,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[e.settings&&(0,t.jsxs)("div",{className:"text-xs text-muted-foreground space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"h-3 w-3"}),(0,t.jsxs)("span",{children:["Max ",e.settings.maxLeadsPerCloser," leads/closer"]})]}),(0,t.jsxs)("div",{children:["Hours: ",null==(i=e.settings.workingHours)?void 0:i.start," - ",null==(s=e.settings.workingHours)?void 0:s.end]})]}),e.chatChannelId&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,t.jsx)(m.A,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"font-mono",children:e.chatChannelId})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2 pt-2",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(f.$,{variant:"outline",size:"sm",onClick:()=>ex(e.id,!e.isActive),children:e.isActive?"Deactivate":"Activate"}),(0,t.jsx)(f.$,{variant:"outline",size:"sm",onClick:()=>ef(e),children:(0,t.jsx)(h.A,{className:"h-4 w-4"})})]}),(0,t.jsx)(f.$,{variant:"destructive",size:"sm",onClick:()=>ev(e.id),children:(0,t.jsx)(g.A,{className:"h-4 w-4"})})]})]})})]},e.id)})})]},e.id)})})})]})})]})]}):(0,t.jsx)("div",{className:"container py-10",children:(0,t.jsx)(j.Zp,{children:(0,t.jsxs)(j.Wu,{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,t.jsx)(r.A,{className:"h-16 w-16 text-destructive mb-4"}),(0,t.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Access Restricted"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"You do not have permission to access this area. Admin access required."})]})})})}},80333:(e,i,s)=>{"use strict";s.d(i,{d:()=>d});var t=s(95155),a=s(12115),n=s(4884),r=s(59434);let d=a.forwardRef((e,i)=>{let{className:s,...a}=e;return(0,t.jsx)(n.bL,{className:(0,r.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...a,ref:i,children:(0,t.jsx)(n.zi,{className:(0,r.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});d.displayName=n.bL.displayName},83441:(e,i,s)=>{Promise.resolve().then(s.bind(s,41513))},88539:(e,i,s)=>{"use strict";s.d(i,{T:()=>r});var t=s(95155),a=s(12115),n=s(59434);let r=a.forwardRef((e,i)=>{let{className:s,...a}=e;return(0,t.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:i,...a})});r.displayName="Textarea"}},e=>{var i=i=>e(e.s=i);e.O(0,[2992,3644,5769,8248,8198,8108,587,470,5152,1859,632,3588,8441,1684,7358],()=>i(83441)),_N_E=e.O()}]);